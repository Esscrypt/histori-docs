{"openapi":"3.0.0","paths":{"/{network}/transactions/{txHash}":{"get":{"operationId":"TransactionController_getTransactionDetails","summary":"Fetch transaction details by hash","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"txHash","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"Transaction details fetched successfully."},"400":{"description":"Invalid network name or transaction hash."}},"tags":["Transactions"]}},"/{network}/uniswap/eth-usd-price":{"get":{"operationId":"UniswapV3Controller_getETHToUSDTPrice","summary":"Get ETH to USDT price from Uniswap V3 pool on a specified network","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}}],"responses":{"200":{"description":"The ETH/USDT price."},"400":{"description":"Invalid network name."}},"tags":["UniswapV3"]}},"/{network}/allowance/single":{"get":{"operationId":"AllowanceController_getAllowance","summary":"Get allowance by owner, spender, token, and block number for a given network.","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"owner","required":false,"in":"query","description":"The wallet address or ENS name of the owner.","schema":{"example":"0x1234567890abcdef1234567890abcdef12345678","type":"string"}},{"name":"spender","required":false,"in":"query","description":"The wallet address or ENS name of the spender.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"tokenAddress","required":false,"in":"query","description":"The contract address of the token.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"blockNumber","required":false,"in":"query","description":"The block number for which the allowance is requested.","schema":{"example":"123456","type":"number"}},{"name":"timestamp","required":false,"in":"query","description":"The timestamp for which the allowance is requested (ISO 8601 format).","schema":{"example":"2022-01-01T00:00:00Z","type":"string"}}],"responses":{"200":{"description":"The allowance data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AllowanceResponseDto"}}}}},"tags":["Allowances"]}},"/{network}/balance/single":{"get":{"operationId":"BalanceController_getSingleBalance","summary":"Get balance by wallet, token, and block number or timestamp.","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"holder","required":false,"in":"query","description":"The wallet address or ENS name of the user.","schema":{"example":"0x1234567890abcdef1234567890abcdef12345678","type":"string"}},{"name":"tokenAddress","required":false,"in":"query","description":"The contract address of the token.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"blockNumber","required":false,"in":"query","description":"Optional block number for which the balance is requested.","schema":{"example":"123456","type":"number"}},{"name":"timestamp","required":false,"in":"query","description":"Optional timestamp for which the balance is requested (ISO 8601 format).","schema":{"example":"2022-01-01T00:00:00Z","type":"string"}}],"responses":{"200":{"description":"The balance data for a specific block or timestamp.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BalanceResponseDto"}}}}},"tags":["Balances"]}},"/{network}/chain/block-height":{"get":{"operationId":"ChainController_getBlockHeight","summary":"Get the current block height","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}}],"responses":{"200":{"description":"The current block height.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BlockHeightResponseDto"}}}},"400":{"description":"Failed to fetch block height."}},"tags":["Chain"]}},"/{network}/chain/gas-price":{"get":{"operationId":"ChainController_getGasPrice","summary":"Get the current gas price","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"type","required":true,"in":"query","description":"Type of transaction: native token transfer, ERC20 transfer, or swap.","schema":{"example":"native_transfer","enum":["native_transfer","erc_transfer","swap"],"type":"string"}}],"responses":{"200":{"description":"The current gas price object.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GasPriceResponseDto"}}}},"400":{"description":"Failed to fetch gas price."}},"tags":["Chain"]}},"/{network}/chain/logs/signature/{eventSignature}":{"get":{"operationId":"ChainController_getLogsByEventSignature","summary":"Get logs for by event signature","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"eventSignature","required":true,"in":"path","description":"Event signature to filter logs","schema":{"example":"Transfer(address,address,uint256)","type":"string"}},{"name":"startBlock","required":false,"in":"query","description":"The starting block number.","schema":{"example":123456,"type":"number"}},{"name":"endBlock","required":false,"in":"query","description":"The ending block number.","schema":{"example":123999,"type":"number"}},{"name":"blockHash","required":false,"in":"query","description":"The block hash to filter logs.","schema":{"example":"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef","type":"string"}},{"name":"contractAddress","required":false,"in":"query","description":"The contract address to filter logs.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"topics","required":false,"in":"query","description":"The topics array to filter logs.","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"The logs for the specified event signature."},"400":{"description":"Failed to fetch logs."}},"tags":["Chain"]}},"/{network}/chain/logs/contract/{contractAddress}":{"get":{"operationId":"ChainController_getLogsByContractAddress","summary":"Get logs by contract address","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"contractAddress","required":true,"in":"path","description":"Contract address to filter logs","schema":{"example":"0x1234567890123456789012345678901234567890","type":"string"}},{"name":"startBlock","required":false,"in":"query","description":"The starting block number.","schema":{"example":123456,"type":"number"}},{"name":"endBlock","required":false,"in":"query","description":"The ending block number.","schema":{"example":123999,"type":"number"}},{"name":"blockHash","required":false,"in":"query","description":"The block hash to filter logs.","schema":{"example":"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef","type":"string"}},{"name":"topics","required":false,"in":"query","description":"The topics array to filter logs.","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"The logs for the specified contract.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LogResponseDto"}}}}},"400":{"description":"Failed to fetch logs."}},"tags":["Chain"]}},"/{network}/chain/logs":{"get":{"operationId":"ChainController_getLogs","summary":"Get logs by filter","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"startBlock","required":false,"in":"query","description":"The starting block number.","schema":{"example":123456,"type":"number"}},{"name":"endBlock","required":false,"in":"query","description":"The ending block number.","schema":{"example":123999,"type":"number"}},{"name":"blockHash","required":false,"in":"query","description":"The block hash to filter logs.","schema":{"example":"0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef","type":"string"}},{"name":"contractAddress","required":false,"in":"query","description":"The contract address to filter logs.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"topics","required":false,"in":"query","description":"The topics array to filter logs.","schema":{"type":"array","items":{"type":"string"}}}],"responses":{"200":{"description":"The logs for the specified filter.","content":{"application/json":{"schema":{"type":"array"}}}},"400":{"description":"Failed to fetch logs."}},"tags":["Chain"]}},"/{network}/chain/block":{"get":{"operationId":"ChainController_getBlock","summary":"Get a block by block number or block hash on any supported network","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"blockNumber","required":false,"in":"query","description":"The block number for which the block data is requested.","schema":{"example":"123456","type":"string"}},{"name":"blockHash","required":false,"in":"query","description":"The block hash for which the block data is requested.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}}],"responses":{"200":{"description":"The block details.","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BlockResponseDto"}}}}},"400":{"description":"Failed to fetch block."}},"tags":["Chain"]}},"/{network}/nft/token-uri":{"get":{"operationId":"NFTController_getTokenUri","summary":"Get token URI for an ERC721 or ERC1155 token","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"tokenAddress","required":true,"in":"query","description":"The contract address of the ERC721 or ERC1155 token.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"tokenId","required":true,"in":"query","description":"The token ID for which the token URI is requested.","schema":{"example":"1","type":"string"}}],"responses":{"200":{"description":"The token URI and metadata.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenUriResponseDto"}}}},"400":{"description":"Invalid contract or token ID."}},"tags":["NFT"]}},"/{network}/nft/owner":{"get":{"operationId":"NFTController_isOwnerOfToken","summary":"Check if the user is the owner of an NFT. Works for both ERC721 and ERC1155","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"tokenAddress","required":true,"in":"query","description":"The contract address of the ERC721 or ERC1155 token.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"owner","required":true,"in":"query","description":"The ENS name or address of the owner.","schema":{"type":"string"}},{"name":"tokenId","required":true,"in":"query","description":"The token ID for which the token URI is requested.","schema":{"example":"1","type":"string"}}],"responses":{"200":{"description":"Boolean indicating if the user is the owner of the NFT.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/NFTOwnershipResponseDto"}}}},"400":{"description":"Invalid contract or token ID."}},"tags":["NFT"]}},"/{network}/token-supply":{"get":{"operationId":"TokenSupplyController_getTokenSupply","summary":"Get token supply by token address and block number for a given network.","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"tokenAddress","required":true,"in":"query","description":"The contract address of the token or ENS name.","schema":{"example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd","type":"string"}},{"name":"blockNumber","required":false,"in":"query","description":"Optional block number for which the balance is requested.","schema":{"example":"123456","type":"number"}},{"name":"timestamp","required":false,"in":"query","description":"Optional timestamp for which the balance is requested (ISO 8601 format).","schema":{"example":"2022-01-01T00:00:00Z","type":"string"}}],"responses":{"200":{"description":"The token supply data.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenSupplyDto"}}}}},"tags":["TokenSupplies"]}},"/{network}/token":{"get":{"operationId":"TokenController_getTokens","summary":"Get a paginated list of tokens, optionally filter by type.","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"tokenType","required":false,"in":"query","description":"Filter by token type (erc20, erc721, erc777, erc1155)","schema":{"example":"erc20","enum":["erc20","erc721","erc777","erc1155"],"type":"string"}},{"name":"page","required":false,"in":"query","description":"Page number for pagination","schema":{"example":1,"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of tokens per page, Max 100 per page","schema":{"example":10,"type":"number"}}],"responses":{"200":{"description":"The paginated list of tokens.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedTokensResponseDto"}}}}},"tags":["Tokens"]}},"/{network}/token/{contractAddress}":{"get":{"operationId":"TokenController_getTokenByAddress","summary":"Get token by contract address.","parameters":[{"name":"network","required":true,"in":"path","description":"Blockchain network name or chain id, currently only eth-mainnet (or 1) is supported","schema":{"example":"eth-mainnet","type":"string"}},{"name":"contractAddress","required":true,"in":"path","description":"The contract address of the token in hexadecimal format or an ENS name.","schema":{"example":"0xCeD4E93198734dDaFf8492d525Bd258D49eb388E","type":"string"}}],"responses":{"200":{"description":"The token details.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponseDto"}}}}},"tags":["Tokens"]}}},"info":{"title":"Histori API","description":"API for token data and historical balances","version":"0.0.6","contact":{}},"tags":[],"servers":[{"url":"https://api.histori.xyz","description":"Production server"},{"url":"http://localhost:3001","description":"Local development server"}],"components":{"securitySchemes":{"apiKey":{"type":"apiKey","in":"header","name":"x-api-key"}},"schemas":{"AllowanceResponseDto":{"type":"object","properties":{"network_name":{"type":"string","description":"Blockchain network name For the requested query"},"chain_id":{"type":"number","description":"The chain ID of the network."},"token_address":{"type":"string","description":"The contract address of the token in hexadecimal format."},"owner":{"type":"string","description":"The ENS name or address of the owner."},"spender":{"type":"string","description":"The ENS name or address of the spender."},"allowance":{"type":"string","description":"The allowance amount of the token, as a string. The amount is in the smallest unit of the token."},"block_height":{"type":"number","description":"The block number for which the allowance is requested."},"token_id":{"type":"string","description":"The token ID, used for non-fungible tokens like ERC721 and ERC1155. Optional."}},"required":["network_name","chain_id","token_address","owner","spender","block_height"]},"BalanceResponseDto":{"type":"object","properties":{"network_name":{"type":"string","description":"Blockchain network name For the requested query"},"chain_id":{"type":"number","description":"The chain ID of the network."},"token_address":{"type":"string","description":"The contract address of the token in hexadecimal format."},"holder":{"type":"string","description":"The ENS name or address of the token holder."},"balance":{"type":"string","description":"The balance amount of the holder for the token","example":"1000000000000000000"},"block_height":{"type":"number","description":"The block number for which the allowance is requested."},"token_id":{"type":"string","description":"The token ID, used for non-fungible tokens like ERC721 and ERC1155. Optional."}},"required":["network_name","chain_id","token_address","holder","balance","block_height"]},"BlockHeightResponseDto":{"type":"object","properties":{"block_height":{"type":"number","description":"The current block height (number)."},"chain_id":{"type":"number","description":"The chain ID of the blockchain network."},"network_name":{"type":"string","description":"The name of the blockchain network (e.g., eth-mainnet)."}},"required":["block_height","chain_id","network_name"]},"GasPriceResponseDto":{"type":"object","properties":{"chain_id":{"type":"number","description":"The chain ID of the blockchain network."},"network_name":{"type":"string","description":"The name of the blockchain network (e.g., eth-mainnet)."},"currency":{"type":"string","description":"The currency used (e.g., USD)."},"event_type":{"type":"string","description":"The type of transaction (e.g., native_transfer, erc20_transfer, swap)."},"gas_required":{"type":"string","description":"The amount of gas required for the transaction."},"total_gas_cost_dollars":{"type":"string","description":"The total gas cost in USD."},"total_gas_cost_wei":{"type":"string","description":"The total gas cost in wei."},"total_gas_cost_gwei":{"type":"string","description":"The total gas cost in gwei."},"total_gas_cost_eth":{"type":"string","description":"The total gas cost in ETH."},"fee_dollars":{"type":"string","description":"The fee cost in USD."},"fee_wei":{"type":"string","description":"The fee cost in wei."},"fee_gwei":{"type":"string","description":"The fee cost in gwei."},"fee_eth":{"type":"string","description":"The fee cost in ETH."},"tip_dollars":{"type":"string","description":"The tip cost in USD."},"tip_wei":{"type":"string","description":"The tip cost in wei."},"tip_gwei":{"type":"string","description":"The tip cost in gwei."},"tip_eth":{"type":"string","description":"The tip cost in ETH."}},"required":["chain_id","network_name","currency","event_type","gas_required","total_gas_cost_dollars","total_gas_cost_wei","total_gas_cost_gwei","total_gas_cost_eth","fee_dollars","fee_wei","fee_gwei","fee_eth","tip_dollars","tip_wei","tip_gwei","tip_eth"]},"LogResponseDto":{"type":"object","properties":{"address":{"type":"string","description":"The address of the contract that emitted the event."},"topics":{"description":"The topics of the log entry, typically an event signature and indexed parameters.","type":"array","items":{"type":"string"}},"data":{"type":"string","description":"The data of the log entry, typically non-indexed event parameters."},"block_height":{"type":"number","description":"The block number where this log was included."},"block_hash":{"type":"string","description":"The block hash where this log was included."},"log_index":{"type":"number","description":"The index position of this log in the block."},"transaction_hash":{"type":"string","description":"The transaction hash of the transaction that emitted the event."},"transaction_index":{"type":"number","description":"The index position of the event log within the transaction."},"removed":{"type":"boolean","description":"Whether the event was removed due to a chain reorganization."}},"required":["address","topics","data","block_height","block_hash","log_index","transaction_hash","transaction_index","removed"]},"BlockResponseDto":{"type":"object","properties":{"chain_id":{"type":"number","description":"The chain ID of the network."},"network_name":{"type":"string","description":"The name of the network (e.g., eth-mainnet)."},"block_hash":{"type":"string","description":"The hash of the block."},"signed_at":{"format":"date-time","type":"string","description":"The block signed time in ISO format."},"signed_at_timestapm":{"type":"number","description":"The block signed timestamp (in seconds since epoch)."},"block_height":{"type":"number","description":"The block height (block number)."},"block_parent_hash":{"type":"string","description":"The hash of the parent block."},"extra_data":{"type":"string","description":"The extra data attached to the block."},"miner_address":{"type":"string","description":"The address of the miner who produced the block."},"gas_used":{"type":"string","description":"The total amount of gas used in the block."},"gas_limit":{"type":"string","description":"The gas limit of the block."},"block_gas_cost":{"type":"string","description":"The cost of the block in USD."}},"required":["chain_id","network_name","block_hash","signed_at","signed_at_timestapm","block_height","block_parent_hash","extra_data","miner_address","gas_used","gas_limit","block_gas_cost"]},"TokenUriResponseDto":{"type":"object","properties":{"chain_id":{"type":"number","description":"The chain ID of the blockchain network."},"network_name":{"type":"string","description":"The name of the blockchain network (e.g., eth-mainnet)."},"token_id":{"type":"string","description":"The token ID for the specific NFT."},"token_uri":{"type":"string","description":"The URI of the token, which can be an HTTP or IPFS URL."},"metadata":{"type":"object","description":"The metadata of the token, which can include images, attributes, and other data."}},"required":["chain_id","network_name","token_id","token_uri","metadata"]},"NFTOwnershipResponseDto":{"type":"object","properties":{"chain_id":{"type":"number","description":"The chain ID of the blockchain network."},"network_name":{"type":"string","description":"The name of the blockchain network (e.g., eth-mainnet)."},"isOwner":{"type":"boolean","description":"A boolean indicating whether the address owns the specified token."},"owner":{"type":"string","description":"The owner address of the NFT."},"token_id":{"type":"string","description":"The token ID for the specific NFT."}},"required":["chain_id","network_name","isOwner","owner","token_id"]},"TokenSupplyDto":{"type":"object","properties":{"contractAddress":{"type":"string","description":"Token contract address in hexadecimal format","example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd"},"blockNumber":{"type":"number","description":"Block number at the time of the snapshot","example":123456},"totalSupply":{"type":"string","description":"Total supply of the token at the given block number","example":"1000000000000000000"}},"required":["contractAddress","blockNumber","totalSupply"]},"TokenDto":{"type":"object","properties":{"token_address":{"type":"string","description":"Token contract address in hexadecimal format","example":"0xabcdefabcdefabcdefabcdefabcdefabcdefabcd"},"block_height":{"type":"number","description":"Block number at the time of token creation","example":123456},"token_type":{"type":"string","description":"Type of the token (e.g., ERC20, ERC721, ERC777, ERC1155)","example":"ERC20"},"name":{"type":"string","description":"Token name (required for all token types)","example":"My Token"},"symbol":{"type":"string","description":"Token symbol (required for all token types)","example":"MTK"},"decimals":{"type":"number","description":"Number of decimals for ERC20 tokens","example":18},"granularity":{"type":"string","description":"Granularity for ERC777 tokens","example":"1","nullable":true}},"required":["token_address","block_height","token_type","name","symbol","decimals","granularity"]},"PaginatedTokensResponseDto":{"type":"object","properties":{"network_name":{"type":"string","description":"The name of the network (e.g., eth-mainnet)"},"chain_id":{"type":"number","description":"The chain ID associated with the network"},"page":{"type":"number","description":"The current page number"},"limit":{"type":"number","description":"The number of tokens returned per page"},"tokens":{"description":"The list of tokens for the current page","type":"array","items":{"$ref":"#/components/schemas/TokenDto"}}},"required":["network_name","chain_id","page","limit","tokens"]},"TokenResponseDto":{"type":"object","properties":{"chain_id":{"type":"number","description":"The chain ID of the blockchain network."},"network_name":{"type":"string","description":"The name of the blockchain network (e.g., eth-mainnet)."},"token_address":{"type":"string","description":"The contract address of the token."},"block_height":{"type":"number","description":"The block number at which the token was created."},"token_type":{"type":"string","description":"The type of the token (erc20, erc777, etc.)."},"name":{"type":"string","description":"The name of the token."},"symbol":{"type":"string","description":"The symbol of the token."},"decimals":{"type":"number","description":"The number of decimals for an ERC20 token (optional)."},"granularity":{"type":"number","description":"The granularity of an ERC777 token (optional)."}},"required":["chain_id","network_name","token_address","block_height","token_type","name","symbol"]}}},"security":[{"apiKey":[]}]}